{"ast":null,"code":"import _slicedToArray from\"/root/code/amandaaurora/chess-pgn-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Chess}from\"chess.js\";import{Chessboard}from\"react-chessboard\";import{useChess}from'../contexts/ChessContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoadPGN(_ref){var _moves$moveIndex;var fens=_ref.fens;var _useChess=useChess(),responsePGN=_useChess.responsePGN;// const PGN = [\n//   '[Event \"Casual Game\"]',\n//   '[Site \"Berlin GER\"]',\n//   '[Date \"1852.??.??\"]',\n//   '[EventDate \"?\"]',\n//   '[Round \"?\"]',\n//   '[Result \"1-0\"]',\n//   '[White \"Adolf Anderssen\"]',\n//   '[Black \"Jean Dufresne\"]',\n//   '[ECO \"C52\"]',\n//   '[WhiteElo \"?\"]',\n//   '[BlackElo \"?\"]',\n//   '[PlyCount \"47\"]',\n//   '',\n//   '1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bxb4 5.c3 Ba5 6.d4 exd4 7.O-O',\n//   'd3 8.Qb3 Qf6 9.e5 Qg6 10.Re1 Nge7 11.Ba3 b5 12.Qxb5 Rb8 13.Qa4',\n//   'Bb6 14.Nbd2 Bb7 15.Ne4 Qf5 16.Bxd3 Qh5 17.Nf6+ gxf6 18.exf6',\n//   'Rg8 19.Rad1 Qxf3 20.Rxe7+ Nxe7 21.Qxd7+ Kxd7 22.Bf5+ Ke8',\n//   '23.Bd7+ Kf8 24.Bxe7# 1-0',\n// ]\n//console.log(restoreGame(responsePGN))\nvar _useState=useState(new Chess()),_useState2=_slicedToArray(_useState,2),game=_useState2[0],setGame=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),moveIndex=_useState4[0],setMoveIndex=_useState4[1];console.log(responsePGN);console.log(setGame);try{console.log(responsePGN);game.load_pgn(responsePGN.join('\\n'));}catch(_unused){//let moves_pgn = game.load_pgn(PGN.join('\\n'));\n}var moves=game.history({verbose:true});var handlePreviousMove=function handlePreviousMove(){if(moveIndex>0){setMoveIndex(moveIndex-1);}};var handleNextMove=function handleNextMove(){if(moveIndex<fens.length){setMoveIndex(moveIndex+1);}};var _useChess2=useChess(),dispatch=_useChess2.dispatch;function updateCamera(){console.log('Onclick Works');dispatch({type:\"reset\"});};function downloadFile(_ref2){var responsePGN=_ref2.responsePGN;if(typeof responsePGN!=='undefined'&&responsePGN!==null){console.log(responsePGN);var blob=new Blob([responsePGN],{type:\"text/plain\"});var url=URL.createObjectURL(blob);var link=document.createElement(\"a\");link.download=\"chess-games.txt\";link.href=url;console.log('download link',link);link.click();}};//   game.move(moves[i], { sloppy: true });\n//   fenList.push(game.fen());\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex justify-content-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-6 col-md-6 col-sm-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chessboard\",children:/*#__PURE__*/_jsx(Chessboard,{position:fens[moveIndex]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePreviousMove,className:\"mr-2 rounded bg-slate-300 px-4 py-2 text-black\",disabled:moveIndex===0,children:\"\\u3008\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextMove,className:\"rounded bg-slate-300 px-4 py-2 text-black\",disabled:moveIndex===fens.length-1,children:\"\\u3009\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return downloadFile(responsePGN);},className:\"rounded bg-slate-300 px-4 py-2 text-black\",children:\"Download game\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return updateCamera();},className:\"rounded bg-slate-300 px-4 py-2 text-black reset\",children:\"Reset\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notation\",children:(_moves$moveIndex=moves[moveIndex])===null||_moves$moveIndex===void 0?void 0:_moves$moveIndex.san})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 col-md-6 col-sm-10\",children:/*#__PURE__*/_jsx(\"p\",{children:responsePGN})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-2 col-md-2 col-sm-10\"})]});}export default LoadPGN;","map":{"version":3,"names":["React","useState","Chess","Chessboard","useChess","jsx","_jsx","jsxs","_jsxs","LoadPGN","_ref","_moves$moveIndex","fens","_useChess","responsePGN","_useState","_useState2","_slicedToArray","game","setGame","_useState3","_useState4","moveIndex","setMoveIndex","console","log","load_pgn","join","_unused","moves","history","verbose","handlePreviousMove","handleNextMove","length","_useChess2","dispatch","updateCamera","type","downloadFile","_ref2","blob","Blob","url","URL","createObjectURL","link","document","createElement","download","href","click","className","children","position","onClick","disabled","san"],"sources":["/root/code/amandaaurora/chess-pgn-react/src/components/LoadPGN.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {Chess} from \"chess.js\";\nimport { Chessboard } from \"react-chessboard\";\nimport { useChess } from '../contexts/ChessContext';\n\nfunction LoadPGN({ fens }) {\n  const {responsePGN} = useChess()\n\n\n\n  // const PGN = [\n  //   '[Event \"Casual Game\"]',\n  //   '[Site \"Berlin GER\"]',\n  //   '[Date \"1852.??.??\"]',\n  //   '[EventDate \"?\"]',\n  //   '[Round \"?\"]',\n  //   '[Result \"1-0\"]',\n  //   '[White \"Adolf Anderssen\"]',\n  //   '[Black \"Jean Dufresne\"]',\n  //   '[ECO \"C52\"]',\n  //   '[WhiteElo \"?\"]',\n  //   '[BlackElo \"?\"]',\n  //   '[PlyCount \"47\"]',\n  //   '',\n  //   '1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bxb4 5.c3 Ba5 6.d4 exd4 7.O-O',\n  //   'd3 8.Qb3 Qf6 9.e5 Qg6 10.Re1 Nge7 11.Ba3 b5 12.Qxb5 Rb8 13.Qa4',\n  //   'Bb6 14.Nbd2 Bb7 15.Ne4 Qf5 16.Bxd3 Qh5 17.Nf6+ gxf6 18.exf6',\n  //   'Rg8 19.Rad1 Qxf3 20.Rxe7+ Nxe7 21.Qxd7+ Kxd7 22.Bf5+ Ke8',\n  //   '23.Bd7+ Kf8 24.Bxe7# 1-0',\n  // ]\n\n  //console.log(restoreGame(responsePGN))\n\n  const [game, setGame] = useState(new Chess());\n  const [moveIndex, setMoveIndex] = useState(0);\n  console.log(responsePGN);\n  console.log(setGame);\n\n  try {\n    console.log(responsePGN);\n     game.load_pgn(responsePGN.join('\\n'));\n  }\n  catch {\n    //let moves_pgn = game.load_pgn(PGN.join('\\n'));\n\n  }\n\n  const moves = game.history({ verbose: true });\n\n  const handlePreviousMove = () => {\n    if (moveIndex > 0) {\n      setMoveIndex(moveIndex - 1);\n    }\n  };\n\n  const handleNextMove = () => {\n    if (moveIndex < fens.length) {\n      setMoveIndex(moveIndex + 1);\n    }\n  };\n\n  const {dispatch} = useChess()\n\n  function updateCamera() {\n    console.log('Onclick Works')\n    dispatch({type:\"reset\"})\n\n  };\n\n\n  function downloadFile({responsePGN}){\n\n      if (typeof responsePGN !== 'undefined' && responsePGN !== null){\n        console.log(responsePGN)\n        const blob = new Blob([responsePGN], { type: \"text/plain\" });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement(\"a\");\n        link.download = \"chess-games.txt\";\n        link.href = url;\n        console.log('download link',link)\n        link.click();\n      }\n\n  };\n\n  //   game.move(moves[i], { sloppy: true });\n      //   fenList.push(game.fen());\n\n\n  return (\n    <div className='row d-flex justify-content-center'>\n\n      {/* <div className=\"col-lg-6 col-md-6 col-sm-10\"> */}\n      <div className=\"col-lg-6 col-md-6 col-sm-10\">\n       <div className='chessboard'>\n        <Chessboard\n          position={fens[moveIndex]}\n        />\n        </div>\n\n      <div className=\"mt-2\">\n        <button\n          onClick={handlePreviousMove}\n          className=\"mr-2 rounded bg-slate-300 px-4 py-2 text-black\"\n          disabled={moveIndex === 0}\n        >\n          〈\n        </button>\n        <button\n          onClick={handleNextMove}\n          className=\"rounded bg-slate-300 px-4 py-2 text-black\"\n          disabled={moveIndex === fens.length - 1}\n        >\n          〉\n        </button>\n\n        <button\n            onClick={() => downloadFile(responsePGN)}\n            className=\"rounded bg-slate-300 px-4 py-2 text-black\">\n            Download game\n          </button>\n\n          <button onClick={()=> updateCamera()}\n            className=\"rounded bg-slate-300 px-4 py-2 text-black reset\">\n            Reset\n          </button>\n      </div>\n\n         <div className='notation'>{moves[moveIndex]?.san}</div>\n        </div>\n\n      <div className=\"col-lg-6 col-md-6 col-sm-10\">\n        <p>{responsePGN}</p>\n        </div>\n        <div className=\"col-lg-2 col-md-2 col-sm-10\"></div>\n    </div>\n  )\n}\n\nexport default LoadPGN\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}